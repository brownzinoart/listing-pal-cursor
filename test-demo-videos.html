<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Demo Videos</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background: #1e293b;
        color: white;
      }
      .container {
        background: #334155;
        padding: 20px;
        border-radius: 12px;
        margin: 20px 0;
      }
      .voice-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
        margin: 20px 0;
      }
      .voice-card {
        background: #475569;
        padding: 20px;
        border-radius: 8px;
      }
      .voice-name {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 10px;
        color: #a78bfa;
      }
      .status {
        padding: 8px 12px;
        border-radius: 4px;
        margin: 10px 0;
        font-size: 14px;
      }
      .status.exists {
        background: #22c55e;
      }
      .status.missing {
        background: #ef4444;
      }
      .status.checking {
        background: #3b82f6;
      }
      video {
        width: 100%;
        max-height: 200px;
        margin: 10px 0;
        border-radius: 4px;
      }
      button {
        background: #6366f1;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        margin: 5px;
      }
      button:hover {
        background: #4f46e5;
      }
      button:disabled {
        background: #64748b;
        cursor: not-allowed;
      }
      .summary {
        background: #1e293b;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
      }
    </style>
  </head>
  <body>
    <h1>üé¨ Demo Videos Test</h1>

    <div class="container">
      <h2>Check Demo Video Files</h2>
      <p>Testing if pre-generated demo videos exist for each voice:</p>

      <button onclick="checkAllVideos()">Check All Demo Videos</button>
      <button onclick="generateVideos()">Generate Missing Videos</button>

      <div id="summary" class="summary" style="display: none">
        <h3>Summary</h3>
        <div id="summary-content"></div>
      </div>

      <div class="voice-grid" id="voice-grid">
        <!-- Will be populated by JavaScript -->
      </div>
    </div>

    <script>
      const VOICES = [
        { id: "nova", name: "Nova", description: "Professional female voice" },
        { id: "alloy", name: "Alloy", description: "Balanced versatile voice" },
        { id: "echo", name: "Echo", description: "Authoritative male voice" },
        {
          id: "fable",
          name: "Fable",
          description: "British storytelling voice",
        },
        { id: "onyx", name: "Onyx", description: "Deep resonant male voice" },
        {
          id: "shimmer",
          name: "Shimmer",
          description: "Bright energetic female voice",
        },
      ];

      let videoStatus = {};

      // Initialize voice grid
      function initializeVoiceGrid() {
        const grid = document.getElementById("voice-grid");

        VOICES.forEach((voice) => {
          const card = document.createElement("div");
          card.className = "voice-card";
          card.innerHTML = `
                    <div class="voice-name">${voice.name} (${voice.id})</div>
                    <div class="status checking" id="status-${voice.id}">Checking...</div>
                    <video id="video-${voice.id}" controls style="display:none;">
                        Your browser does not support the video tag.
                    </video>
                `;
          grid.appendChild(card);
        });
      }

      // Check if a video exists
      async function checkVideo(voiceId) {
        const statusEl = document.getElementById(`status-${voiceId}`);
        const videoEl = document.getElementById(`video-${voiceId}`);

        try {
          const videoUrl = `/demo-videos/beverly-hills-${voiceId}.mp4`;
          const response = await fetch(videoUrl, { method: "HEAD" });

          if (response.ok) {
            statusEl.className = "status exists";
            statusEl.textContent = "‚úÖ Video exists";
            videoEl.src = videoUrl + "?t=" + Date.now();
            videoEl.style.display = "block";
            videoStatus[voiceId] = true;
          } else {
            statusEl.className = "status missing";
            statusEl.textContent = "‚ùå Video missing";
            videoEl.style.display = "none";
            videoStatus[voiceId] = false;
          }
        } catch (error) {
          statusEl.className = "status missing";
          statusEl.textContent = "‚ùå Error checking";
          videoEl.style.display = "none";
          videoStatus[voiceId] = false;
        }
      }

      // Check all videos
      async function checkAllVideos() {
        videoStatus = {};

        // Reset all status
        VOICES.forEach((voice) => {
          const statusEl = document.getElementById(`status-${voice.id}`);
          statusEl.className = "status checking";
          statusEl.textContent = "Checking...";
        });

        // Check each video
        await Promise.all(VOICES.map((voice) => checkVideo(voice.id)));

        // Show summary
        showSummary();
      }

      // Show summary
      function showSummary() {
        const summaryEl = document.getElementById("summary");
        const contentEl = document.getElementById("summary-content");

        const existing = Object.values(videoStatus).filter(
          (exists) => exists,
        ).length;
        const missing = VOICES.length - existing;

        contentEl.innerHTML = `
                <p><strong>Total voices:</strong> ${VOICES.length}</p>
                <p><strong>‚úÖ Videos exist:</strong> ${existing}</p>
                <p><strong>‚ùå Videos missing:</strong> ${missing}</p>
                ${missing > 0 ? '<p style="color: #f59e0b;">‚ö†Ô∏è Run the generation script to create missing videos</p>' : '<p style="color: #22c55e;">üéâ All demo videos are ready!</p>'}
            `;

        summaryEl.style.display = "block";
      }

      // Generate videos
      function generateVideos() {
        alert(
          "To generate demo videos:\\n\\n1. Make sure the dev server is running (npm run dev)\\n2. Run: node scripts/generate-all-demo-videos.js\\n\\nThis will create all 6 demo videos with different voices.",
        );
      }

      // Initialize on load
      window.addEventListener("load", () => {
        initializeVoiceGrid();
        checkAllVideos();
      });
    </script>
  </body>
</html>
